
node 
{ 
   	stage('Clone Repository') 
	{        		
		withCredentials([usernamePassword(credentialsId: 'GIT_LAB_FULL', usernameVariable: 'USERNAME', passwordVariable: 'API_TOKEN')])
		{
			//git branch:'main' url: "https://$API_TOKEN@gitlab.com/sagecarey/test.git"
			//sh 'git branch url:\'https://$API_TOKEN@gitlab.com/sagecarey/mbsa.git\''
			//https://gitlab.com/ralphccarey/mbsa.git
			def cloneCommand = 'git clone https://user:$API_TOKEN@gitlab.com/ralphccarey/mbsa.git /var/lib/jenkins/workspace/mbsa'			
			println("Clone Command = " + cloneCommand)
			sh cloneCommand
			sh 'pwd'
			sh 'cd /var/lib/jenkins/workspace/mbsa/mbsa'
			//sh 'git status' //this is just for debug
			sh 'pwd'
		}
   	}
    	stage('Add Files')
	{
        	echo 'Adding Files'
		sh "echo 'New file 1' > mbsa/data1.txt"
		sh "echo 'var a=0' >>mbsa/data1.txt"
		sh "echo 'var b=1' >>mbsa/data1.txt"
		sh "echo 'New File 2' >mbsa/data2.txt"
		sh "echo 'Color\tSize' >>mbsa/data2.txt"
		sh "echo 'Blue\tLarge' >>mbsa/data2.txt"
    	}
	stage('Check-in')
	{
        	withCredentials([usernamePassword(credentialsId: 'GIT_LAB_FULL', usernameVariable: 'USERNAME', passwordVariable: 'API_TOKEN')])
		{
			echo 'Checking in new files'
			sh 'git status' //this is just for debug

		}

    	}
}
